<html>
<head></head>
<body>
	<canvas id="canvas" width=500 height=500></canvas>
</body>
<script type="text/javascript">
	var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d");
	var _dom = document.createElement("canvas");
	var _ctx = _dom.getContext("2d");
	var image = new Image();
	image.src = "./animation/animation.png";
	image.onload = function(){
		console.log("ok");
		ctx.save();
		ctx.beginPath();
		
		_dom.width = 50;
		_dom.height = 50;
		_ctx.fillRect(0,0,50,50);  //填充颜色 x y坐标 宽 高
		var src = _dom.toDataURL();

		
		//console.log(data);
		ctx.drawImage(image, 0, 0, image.width,image.height, 0, 0, image.width, image.height);
		ctx.globalAlpha = 0.5;
		var _image = new Image();
		_image.src = src;
		ctx.drawImage(_image,0,0,_image.width,_image.height, 0, 0, _image.width, _image.height);
				
		ctx.closePath();
		ctx.restore(); 
		console.log(ctx.globalAlpha);
	}
</script>
</html>